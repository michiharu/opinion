---
slug: less-is-more
title: Less is More
authors: [michiharu]
tags: [dev, simple, less is more]
---

シンプルさについて語るときに僕の語ること、というテーマでいくつか記事を書きたいと思います。

今回はシンプルを生み出す環境について考えます。

## Less is More

### EasyよりもSimpleを

VueはEasy、ReactはSimpleであると言われます。

ReactがVueよりもシンプルであるにも関わらず難しいと言われている理由が、
関数型プログラミングへのパラダイムシフトが要求されるためだと思います。

Reactの公式ページでは「関数型プログラミングの知識は不要である」と謳っていますが、
Reactの思想の出身としては紛れもなく関数型プログラミングであり、
私は関数型プログラミングでUIを構築出来ることこそがReact最大の武器だと考えています。

その武器が、なぜ難しいのでしょうか？

そのように評価される理由の１つは、エンジニアは大抵、命令型プログラミングを最初に経験しているためです。
命令型と関数型、どちらの方が簡単かというと慣れによる偏りを除けば関数型プログラミングの方が簡単です。
（もちろん個人の見解です。）

ただ関数型プログラミングを見慣れているエンジニアが少数派であるため、
初見ではReactのコードを難しく感じている、ということだと思います。

なぜVueは簡単なのでしょうか？

それはフロントエンドエンジニアの必須知識であるHTML, CSSを完全にそのまま活かせるからではないでしょうか。
つまり大きなパラダイムシフトを要求されることなく小さな学習ステップでVueを始めることが出来る[^2]、ということだと思います。

[^2]:Reactの場合、「HTML, CSSを完全にそのまま活かせる」訳ではありませんが、
ReactのJSXが開発者に要求するHTML, CSSの使用方法の変更も個人の感想としてはごくわずかです。
CSSのクラスを渡すために、`class`ではなく`className`と記述すること、
styleを記述するにはJSS（例えば`justify-content: space-evenly;`ではなく`{ justifyContent: "space-evenly" }`と記述する）を使用するといった違いは、
すぐに覚えて慣れます。

今度は、フロントエンドエンジニアにとって小さな学習ステップでスタートできるVueが、
なぜReactよりもシンプルではないのでしょうか？

それは様々な開発時の要件それぞれにショートハンドを用意していて、
開発が進むにつれてそれらの記法が混ざっていくことになり、
コンポーネントが管理するデータの振る舞いもその記述方法の数だけ異なります。

「〇〇がしたい」ということをReactより短い記述で実現できるケースが多いですが、
そのデメリットとして開発者がそれらのショートハンドを理解するための学習コストや、
関数型プログラミングではないため、変数の変化をきちんと理解・管理するためのスキルが要求されるなどが挙げられると思います。

関数型プログラミングのパラダイムのReact vs マルチパラダイムのVueという文脈以外でどちらがシンプルであるかを比較するために、
提供されている手段の数に着目することは参考になると思います。

ReactはVueよりもより少ない手段が提供されていますが、
ReactとVueを使った開発で実現できることの差はありません。

そう考えるとReactのコードがシンプルになることは容易に想像できると思います。

コードの書き手側の気持ちとしては短く書けた方が楽かもしれませんが、読み手側の気持ちとしては書き方に幅がない方が理解が簡単です。
この視点において、Reactが支持される理由とGo言語が支持される理由は同じだと思います。

ちなみに[React vs Vue vs AngularJSのGoogleトレンドによる比較](https://trends.google.co.jp/trends/explore?q=%2Fm%2F012l1vxv,%2Fm%2F0j45p7w,%2Fg%2F11c0vmgx5d&geo=,,&date=today%205-y,today%205-y,today%205-y&cat=13#TIMESERIES)
を見れば、これらのライブラリーのうちReactが最も人気であるということがはっきり分かります。

### LinterによってシンプルになったJavaScript

JavaScriptは非常に歴史のある言語ですね。そして近年はとても人気のある言語の一つです。

しかし少なくとも15年前はJavaScriptの一部の雑な言語使用を理由に
開発者からは倦厭されがちな言語だったと記憶しています。

こちらはJavaScriptの雑な仕様を活用したハックの例です。解説がないと訳がわからないですね。
```js
(![]+[])[+[]]+(![]+[])[+!+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]
-> fail
```

他に、普通に開発していてもJavaScriptをよく知っていないとデバックの難しい仕様も多数あります。
- `==`と`===`で異なる結果になるケースがある
- `typeof null === 'object'`は`true`

Badなパーツ（言語仕様）があるからこそ、『JavaScript Good Parts』という本も出版されました。

そして時代は流れました。
私がフルコミットのエンジニアになった6年前には既に、JavaScriptの悪い仕様に依存したコードが書けないように、
ESLintを活用して開発するのが当たり前になっていました。

歴史のあるプログラミング言語は後方互換性のために仕様を削ることが難しいです。
しかし新規プロジェクトでは洗練されていない言語仕様を前提とするようなコードを書きたくありません。
このような経緯から現在では元々言語が持っている仕様の一部を制限して開発できるような仕組みが整っています。

多くの言語仕様を持つ言語の性質について「言語にパワーがある」という表現をしますが、これは必ずしも褒め言葉ではありません。
たくさんの言語仕様があるということは、それだけコードが無秩序になりやすいためです。

### シンプルに設計されたGo言語

モダンな言語の1つにGoogleが開発しているGo言語があります。
JavaScriptとは対照的に歴史の浅い言語で、言語のパワーを極限まで削ぎ落として設計された言語です。

言語仕様がとても絞られているために初心者が仕様を覚えて戦力になるまで1ヶ月程度である、という話(噂？)です。

速度についてはC, C++といった最速を誇る言語よりやや遅いですが、Pythonのような言語の約10倍速いです。
この背景としては、言語仕様が少ないためコンパイラー側から見た時のインプットがシンプルとなり、
全体的な言語としての開発や局所的なパフォーマンスチューニングが実施可能だったのだろうと思います。

## まとめ

コードは書く機会より読まれる機会の方が必ず多くなります。
書いてすぐ読むだけでなく、半年後や1年後に読むこともあるでしょう。

より少ない知識で読めるコードはそれだけシンプルで読みやすいコードだと思います。

TypeScriptによる開発経験が長いので、素のnodejs、ESLint無しの環境でコードを書くことが
こんなに怖いのかと思い知る今日この頃です。
